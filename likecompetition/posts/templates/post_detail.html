{% extends 'base.html' %}
{% load static %}
{% block title %}<link rel="stylesheet" type="text/css" href="{% static 'post_detail.css' %}">{% endblock %}

{% block content %}
<a href="{% url 'index' %}">index로 이동하기</a>
<div class="post_detail_box">
    <div class="post_detail_left">
        <div id="post_detail_profile_img"></div>
        <div id="post_detail_profile_name">{{ post.user }}</div>
        <div>{{ post.gender }} 남성 / 33세{{ post.age }}</div>
        <div> {{ post.city }} {{ post.area }}</div>
    </div>
    <div class="post_detail_right">
        <div>
            <div id="post_detail_field">
                {{ post.field }}
            </div>
            <div id="asdf">
                {% for tool in post.field %}
                    <div id="post_detail_tool">#{{ tool }}</div>
                {% endfor %}
            </div>
        </div>
        <div>
            <div id="post_detail_content">{{ post.content }}</div>
            <div class="icon">
                <a class="message" href="#"></a>
                <scrap url="{% url 'scrap_detail' post.id %}" v-bind:initial-scrapped="{{ post.scrapped }}"></scrap>
                <!-- <form class="inline_form" action="{% url 'scrap_detail' post.id %}" method="post">
                    {% csrf_token %}
                    <a href="#" onclick="parentNode.submit();">스크랩하기</a>
                </form> -->
                {% if request.user == post.user %}
                <a href="{% url 'post_edit' post.id %}">수정하기</a>
                <form class="inline_form" action="{% url 'post_detail' post.id %}" method="post">
                    {% csrf_token %}
                    <a href="#" onclick="parentNode.submit();" id="post_detail_delete"></a>
                    <input type="hidden" name="_method" value="DELETE" />
                </form>
                {% endif %}
            </div>
        </div>
    </div>
</div>

<!--
<h1>{{ post.title }}</h1>
글번호 : {{ post.id }}<br> 
조회수 : {{ post.view_count }}<br>
날짜 : {{ post.date }}<br>
{% comment %} 성별 : {{ post.gender }}<br>
나이 : {{ post.age }}<br> {% endcomment %}
시/도 : {{ post.city }}<br>
구/군 : {{ post.area }}<br>
분야 : {{ post.field }}<br>
내용 : {{ post.content }}<br>
<br>
-->


{% if request.user == post.user %}
    <a href="{% url 'post_edit' post.id %}">수정하기</a>
    <form class="inline_form" action="{% url 'post_detail' post.id %}" method="post">
        {% csrf_token %}
        <a href="#" onclick="parentNode.submit();">삭제하기</a>
        <input type="hidden" name="_method" value="DELETE" />
    </form>
{% endif %}
<form class="inline_form" action="{% url 'scrap_detail' post.id %}" method="post">
    {% csrf_token %}
    <a href="#" onclick="parentNode.submit();">스크랩하기</a>
</form>
<br><br>

{% for comment in comments %}
    작성자 : {{ comment.user.nickname }}<br>
    날짜 : {{ comment.date }}<br>
    내용 : {{ comment.content }}<br>
    {% if request.user == comment.user %}
        <form class="inline_form" action="{% url 'comment_detail' post.id comment.id %}" method="post">
            {% csrf_token %}
            <a href="#" onclick="parentNode.submit();">삭제하기</a>
            <input type="hidden" name="_method" value="DELETE" />
        </form><br>
    {% endif %}
    <br>
{% endfor %}

<form action="{% url 'comment' post.id %}" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="등록" />
</form>

{% endblock %}

{% block end %}<script src="{% static 'post_detail.js' %}"></script>{% endblock %}
